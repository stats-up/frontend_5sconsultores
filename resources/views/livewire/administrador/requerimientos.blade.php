<div class="container-fluid" style="height:100vh;background-color:#fdfdfd;">
    <div class="row head">
        <div class="col-md-12 d-flex justify-content-between align-items-center top">
            <img class="responsivelogo" src="http://5sconsultores.cl/portal/wp-content/uploads/2019/11/Logo_5s_web.jpg" alt="Logo"  >
            <img class="s-logo" src="data:image/jpeg;base64,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" alt="">
            @livewire('administrador.menu-cliente', ["id_cliente" => $_GET["c"]])
            <div class="dropdown nombrecliente">
                <a class="dropdown-toggle sesiontoggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color:black">      
                    <div class="name" style="padding-right:0.5rem">
                        <div>{{Session::get('user')["email"]}}</div>
                    </div>
                    <div class="iconuser"><i class="fa-solid fa-user"></i></div>
                </a>
                <ul class="dropdown-menu sessionmenu" aria-labelledby="navbarDropdown"  style="margin-top:4rem;width:fit-content" >
                    <li>
                        <a href="/users" class="dropdown-item adminacount d-flex col"  style="width:fit-content" >
                            <i class="fa-solid fa-user-gear" style="font-size:16px;color:grey;display:flex;align-items:center;padding-right:0.5rem"></i>
                            Administrar cuentas
                        </a>
                        <a class="dropdown-item sessionitem" href="/logout" style="display:flex;flex-direction:row">
                            <i class="bi bi-box-arrow-in-right" style="font-size:1.3rem;color:red;display:flex;align-items:center;padding-right:0.5rem"></i>
                            Cerrar sesión
                        </a> 
                    </li>
                </ul>
            </div>
        </div>
    </div>
    @livewire('administrador.ruta-admin', ["id_cliente" => $_GET["c"]])
    @livewire('administrador.editreqer-modal', ["id_cliente" => $_GET["c"]])
    @livewire('administrador.requer-modal', ["id_cliente" => $_GET["c"]])
    @livewire('administrador.verrequer-modal')
    @livewire('administrador.vercontacto-modal')
    <div class="row titulo">Requerimientos</div>
    <div class="px-4 py-4">
        <button href="#" class="btn-post col-md-2" data-bs-toggle="modal" data-bs-target="#addreqModal" >
            <i class="bi bi-plus"></i>Nuevo requerimiento
        </button>
    </div>
    <div wire:ignore class="col-md-12 tabla table-responsive">
        <table id="tabla-admin" class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th scope="col" class="col-md-3">Requerimiento</th>
                    <th scope="col" class="col-md-2">Solicitado Por</th>
                    <th scope="col" class="col-md-1">Fecha Ingreso</th>
                    <th scope="col" class="col-md-1">Estado</th>
                    <th scope="col" class="col-md-1">Candidatas</th>
                    <th scope="col" class="col-md-1"></th>
                    <th scope="col" class="col-md-1"></th>
                </tr>
            </thead>
            <tbody>
                @foreach ($request as $req)
                    @if($req["estado_requerimiento"] != "eliminado")
                    <tr>
                        <td wire:click="seleccionarRequerModal({{$req["id"]}})" data-bs-toggle="modal" data-bs-target="#verrequerModal" style="cursor: pointer">
                            {{$req["nombre"]}}
                        </td>
                        <td wire:click="seleccionarContactoModal({{$req["id_cuenta_solicitante"]}})" data-bs-toggle="modal" data-bs-target="#vercontactModal" style="cursor: pointer">{{$req["nombre_completo_cuenta_solicitante"]}}</td>
                        <td>
                            <span style="display: none;">{{$req["fecha_registro"]}}</span>
                            {{date("d-m-Y H:i:s",strtotime($req["fecha_registro"]))}}
                        </td>
                        <td class="text-center" style="vertical-align:middle">
                            @if($req["perfil_seleccionado"] != "")
                                <span class="badge text-bg-primary">Finalizado</span>
                            @elseif($req["estado_requerimiento"] == "inactivo")
                                <span class="badge badge-warning">Inactivo</span>
                            @elseif($req["estado_requerimiento"] == "activo")
                                <span class="badge badge-success">Activo</span>
                            @endif
                        </td>
                        <td>
                            <a class="btn btn-primary btn-sm w-100" href="/postulantes?c={{$req["id_empresa"]}}&r={{$req["id"]}}">
                                Ver Candidatas
                            </a>
                        </td>
                        <td class="text-center">
                            <button wire:click="seleccionareditRequerModal({{$req["id"]}})" class="btn btn-secondary btn-sm w-100 " data-bs-toggle="modal" data-bs-target="#editreqModal">
                                Editar
                            </button>
                        </td>
                        <td class="text-center">
                            <button class="btn btn-danger btn-sm w-100 deleteReq" data="{{$req["id"]}}">
                                Eliminar
                            </button>
                        </td>
                    </tr>
                    @endif
                @endforeach
            </tbody>
        </table>
    </div>
    <script>
        $(document).ready(function() {
            $('#tabla-admin').DataTable({
                "ordering": true,
                "order": [[2,"desc"]],
                "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "Todos"]],
                language: {
                    "decimal": "",
                    "emptyTable": "No hay información",
                    "info": "Mostrando _START_ a _END_ de _TOTAL_ Filas",
                    "infoEmpty": "Mostrando 0 to 0 of 0 Filas",
                    "infoFiltered": "(Filtrado de MAX total Filas)",
                    "infoPostFix": "",
                    "thousands": ",",
                    "lengthMenu": "Mostrar _MENU_ Filas",
                    "loadingRecords": "Cargando...",
                    "processing": "Procesando...",
                    "search": "Buscar:",
                    "zeroRecords": "Sin resultados encontrados",
                    "paginate": {
                        "first": "Primero",
                        "last": "Ultimo",
                        "next": "Siguiente",
                        "previous": "Anterior"
                        }
                }
            });
        });
        $(".deleteReq").click(function(){
            let idReq = $(this).attr('data');
            Swal.fire({
                title: '¿Eliminar este requerimiento?',
                text: "No se podrá revertir esta acción",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#959595',
                confirmButtonText: 'Eliminar',
                cancelButtonText: 'Cancelar'
                }).then((result) => {
                if (result.isConfirmed) {
                    Livewire.emit('eliminarRequerimiento',idReq);
                    Swal.fire(
                    'Eliminado!',
                    'El requerimiento ha sido eliminado',
                    'success'
                    )
                }
            })
        });
    </script>
</div>