<div class="container-fluid" style="height:100vh;background-color:#fdfdfd;">
    <div class="row head">
        <div class="col-md-12 d-flex justify-content-between align-items-center top">
            <img class="responsivelogo" src="img/Logo_5s_web.jpg" alt="Logo"  >
            <img class="s-logo" src="data:image/jpeg;base64,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" alt="">
            @livewire('administrador.menu-cliente', ["id_cliente" => $_GET["c"]])
            @livewire('administrador.admin-menu-dropdown')
        </div>
    </div>
    @livewire('administrador.addcontacto-modal')
    @livewire('administrador.editcontacto-modal', ["id_cliente" => $_GET["c"]])
    @livewire('administrador.addarea-modal', ["id_cliente" => $_GET["c"]])
    @livewire('administrador.vercontacto-modal')
    <livewire:administrador.editarea-modal/>
    @livewire('administrador.ruta-admin', ["id_cliente" => $_GET["c"]])
    <div class="row titulo">Contactos</div>
    <div class="row btn-addempresa d-flex col justify-content-between">
        <button href="#" class="btn-post" data-bs-toggle="modal" data-bs-target="#addAreaModal">
            <i class="bi bi-plus"></i>
            <div class="name">Agregar nueva área</div>
            <div class="iconuser" style="width:fit-content;white-space: nowrap;">Nueva área</div>
        </button>
        <div style="width:fit-content;display:flex" >
            <div class="row searchrow" style="width:fit-content;" >
                <div class="form-inline d-flex flex-row search">
                    <i class="bi bi-search d-flex align-items-center"></i>
                    <input onkeyup="search()" id="Search" class="form-control" type="search" placeholder="Buscar" aria-label="Search" style="border:0;box-shadow:none;background-color:#fdfdfd;" >
                </div>
            </div>
            <button class="filter" style="width:fit-content">
                <div class="dropdown" >
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false" style="text-decoration:none;color:black">
                        <i class="bi bi-filter">Filtrar</i>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                        <li><a class="dropdown-item" href="#" onclick="filter('Activa')">Activa</a></li>
                        <li><a class="dropdown-item" href="#" onclick="filter('Inactiva')">Inactiva</a></li>
                    </ul>
                </div>
            </button>                
        </div>
    </div>
    <div class="row overflow-auto" style="display:flex;justify-content:center;padding-top:1rem;max-height:70vh;padding-bottom: 5rem">
        <div class="col-12 body-contactos ">
            @foreach ($customer_areas as $item)
                @if ($item["status"] != "eliminado")
                <div class="col-md-12 py-2  target">
                    <div class="card" style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 12px;border:transparent" >
                        <div class="card-body" id="square">
                            <div class="row headArea flex-nowrap px-2 d-flex justify-content-start" >
                                <div class="dropdown d-flex align-items-center dropcard" style="width:fit-content">
                                    <a class=" dropdown-toggle dottoggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="icondrp bi bi-three-dots-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dotmenu">
                                        <li><a wire:click="seleccionarNuevoContacto({{$item["customer"]}},{{$item["id"]}})" class="dropdown-item a" href="#" data-bs-toggle="modal" data-bs-target="#addcontactModal"><i class="icon fa-solid fa-plus"></i>Nuevo contacto</a></li>
                                        <li><a wire:click="seleccionarArea({{$item["customer"]}},{{$item["id"]}})" class="dropdown-item a" href="#" data-bs-toggle="modal" data-bs-target="#editareaModal"><i class="icon fa-solid fa-pen"></i>Cambiar nombre</a></li>
                                        <li><a class="dropdown-item a deleteArea" href="#" data="{{$item["id"]}}"><i class="icon fa-solid fa-trash" style="color:#d52b2baf"></i>Eliminar</a></li>
                                    </ul>
                                </div>
                                <h5 class="card-title py-2">{{$item["name"]}}</h5>

                            </div>
                            @foreach($item["accounts"] as $cuenta)
                                @if($cuenta["estado_cuenta"] != "eliminada")
                                    <div class="row person">
                                        <div class="row row-contact flex-nowrap">
                                            <div class="dropdown dropdot d-flex align-items-center" style="width:fit-content">
                                                <a class=" dropdown-toggle addContacttoggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                    <i class="icondrp bi bi-three-dots-vertical"></i>
                                                </a>
                                                <ul class="dropdown-menu dotmenu">
                                                    <li><a wire:click="seleccionarEditarContacto({{$cuenta["id"]}})" class="dropdown-item a" href="#" data-bs-toggle="modal" data-bs-target="#editcontactModal"><i class="icon fa-solid fa-pen"></i>Editar contacto</a></li>
                                                    <li><a class="dropdown-item a deleteContacto" data="{{$cuenta["id"]}}" href="#"><i class="icon fa-solid fa-trash" style="color:#d52b2baf"></i>Eliminar</a></li>
                                                </ul>
                                            </div>                                 
                                            <div wire:click="seleccionarContactoModal({{$cuenta["id"]}})" class="col person-info"  data-bs-toggle="modal" data-bs-target="#vercontactModal">
                                                <div class="card-subtitle text-muted">{{$cuenta["nombre_completo"]}}</div>
                                                <div class="status" id="status">
                                                    @if($cuenta["estado_cuenta_clave"] == "no activa")
                                                        <span class="badge text-bg-warning mx-2">!</span>
                                                    @endif
                                                    @if ($cuenta["estado_cuenta"] == "activa")
                                                        <span class="badge badge-success">Activa</span>
                                                    @elseif($cuenta["estado_cuenta"] == "inactiva")
                                                        <span class="badge badge-warning">Inactiva</span>
                                                    @elseif($cuenta["estado_cuenta"] == "eliminada")
                                                        <span class="badge badge-danger">Eliminada</span>
                                                    @endif
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                @endif
                            @endforeach
                        </div>
                    </div>
                </div>
                @endif
            @endforeach
        </div>
    </div>
    <script>
        function search() {
            var input = document.getElementById("Search");
            var filter = input.value.toLowerCase();
            var nodes = document.getElementsByClassName('target');

            for (i = 0; i < nodes.length; i++) {
                if (nodes[i].innerText.toLowerCase().includes(filter)) {
                nodes[i].style.display = "block";
                } else {
                nodes[i].style.display = "none";
                }
            }
        }
        function filter(name){      
            var nodes = document.getElementsByClassName('person');
            for (i = 0; i < nodes.length; i++) {
                if (nodes[i].innerText.includes(name)) {
                    nodes[i].style.display = "flex";
                } else {
                    nodes[i].style.display = "none";
                }                    
            }
        }
        $(".deleteArea").click(function(){
            let idArea = $(this).attr('data');
            Swal.fire({
                title: '¿Eliminar esta área?',
                text: "No se podrá revertir esta acción",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#959595',
                confirmButtonText: 'Eliminar',
                cancelButtonText: 'Cancelar'
                }).then((result) => {
                if (result.isConfirmed) {
                    Livewire.emit('eliminarArea',idArea);
                    Swal.fire(
                    'Eliminado!',
                    'El cliente ha sido eliminado',
                    'success'
                    )
                }
            })
        });
        $(".deleteContacto").click(function(){
            let idContacto = $(this).attr('data');
            Swal.fire({
                title: '¿Eliminar este contacto?',
                text: "No se podrá revertir esta acción",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#959595',
                confirmButtonText: 'Eliminar',
                cancelButtonText: 'Cancelar'
                }).then((result) => {
                if (result.isConfirmed) {
                    Livewire.emit('deleteuser',idContacto);
                    Swal.fire(
                    'Eliminado!',
                    'El contacto ha sido eliminado',
                    'success'
                    )
                }
            })
        });
    </script>
</div>